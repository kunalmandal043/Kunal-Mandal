{{ 'custom-grid.css' | asset_url | stylesheet_tag }}
<script src="{{ 'custom-grid.js' | asset_url }}" defer></script>

{% assign all_products_collection = collections['all-products'] %}

<section class="custom-grid">
  <h2 class="heading">Tisso vision in the wild</h2>

  <div class="grid-container">
    {% for product in all_products_collection.products limit:6 %}
      <div class="grid-item" data-handle="{{ product.handle }}">
        <div class="grid-image-wrapper">
          {% if product.featured_image %}
            <img 
              src="{{ product.featured_image | image_url: width: 433, height: 444, crop: 'center' }}" 
              alt="{{ product.title }}" 
              width="433" 
              height="444"
              class="grid-image">
          {% else %}
            <img src="{{ 'placeholder.png' | asset_url }}" alt="Placeholder" width="433" height="444" class="grid-image">
          {% endif %}

          <!-- Popup trigger icon -->
          <img class="popup-icon" src="{{ 'circle-popup.svg' | asset_url }}" alt="Open Popup" width="22" height="22">
        </div>
      </div>
    {% endfor %}
  </div>
</section>

<!-- Quick View Modal -->
<div id="product-popup" class="popup hidden">
  <div class="popup-content" role="dialog" aria-modal="true">
    <button id="popup-close" aria-label="Close">×</button>

    <div class="qv">
      <div class="qv-media">
        <img id="popup-image" src="{{ 'placeholder.png' | asset_url }}" alt="Product image" loading="lazy">
      </div>

      <div class="qv-info">
        <h2 id="popup-title" class="qv-title"></h2>
        <div id="popup-price" class="qv-price"></div>
        <p id="popup-description" class="qv-desc"></p>

        <div class="qv-field">
          <div class="qv-label">Color</div>
          <div id="color-group" class="qv-swatches" role="radiogroup" aria-label="Choose color">
            <!-- swatch buttons injected by JS -->
          </div>
        </div>

        <div class="qv-field">
          <div class="qv-label">Size</div>
          <div class="qv-size">
            <select id="size-select" aria-label="Choose your size"></select>
            <span class="chev" aria-hidden="true">▾</span>
          </div>
        </div>

        <button id="add-to-cart" class="qv-add">
          ADD TO CART <span aria-hidden="true">→</span>
        </button>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Custom Grid",
  "settings": [],
  "blocks": [],
  "presets": [{ "name": "Custom Grid" }]
}
{% endschema %}
